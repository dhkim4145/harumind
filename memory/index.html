<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>í•˜ë£¨ë§ˆìŒ - ê°™ì€ ê·¸ë¦¼ ì°¾ê¸°</title>

<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JX8PENN22H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-JX8PENN22H');
</script>

<style>
:root{
  --bg:#0b1020;
  --text:#e8ecff;
  --muted:#b9c2ff;
  --accent:#6ee7b7;
  --shadow:0 10px 25px rgba(0,0,0,.35);
  --radius:18px;

  --fs-base:16px;
  --fs-title:20px;
  --fs-msg:18px;
  --fs-hint:14px;
  --fs-pill:14px;
  --tile-h:90px;
  --tile-fs:42px;
  --gap:12px;
}

*{box-sizing:border-box;}

body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;
  background: radial-gradient(1200px 800px at 30% 10%, #1b2457 0%, var(--bg) 55%, #050813 100%);
  color:var(--text);
  display:flex;
  justify-content:center;
  padding:18px;
  font-size:var(--fs-base);
}

/* í° ê¸€ì”¨ ëª¨ë“œ */
body.bigText{
  --fs-base:18px;
  --fs-title:24px;
  --fs-msg:22px;
  --fs-hint:16px;
  --fs-pill:16px;
  --tile-h:104px;
  --tile-fs:52px;
  --gap:14px;
}

.wrap{
  width:min(560px,100%);
  display:flex;
  flex-direction:column;
  gap:14px;
}

.card{
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.08);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
}

.titleRow{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.title{
  font-size:var(--fs-title);
  font-weight:900;
}

.sub{
  font-size:14px;
  color:var(--muted);
  margin-top:6px;
}

/* ===== ì˜¤ëŠ˜ í˜„í™©(=ê¸°ë¡ ì˜ì—­) ===== */
.statsHeader{
  margin-top:10px;
  display:flex;
  justify-content:flex-end; /* âœ… ì˜¤ë¥¸ìª½ */
  align-items:center;
}

.statsToggle{
  font-size:14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.08);
  color:var(--text);
  padding:8px 12px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:8px;
}

.chev{
  display:inline-block;
  transition:transform .18s ease;
  opacity:.9;
}

#statsWrap.isOpen .chev{
  transform:rotate(180deg);
}

.stats{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:10px;
}

.pill{
  background:rgba(255,255,255,.07);
  border:1px solid rgba(255,255,255,.12);
  border-radius:999px;
  padding:6px 12px;
  font-size:var(--fs-pill);
}

/* ê¸°ë³¸: ë‹«í˜ */
#statsWrap:not(.isOpen) .stats{ display:none; }

/* âœ… â€œì €ì¥/ê¸°ë¡ ëŠë‚Œâ€ ì¤„ì´ê¸°: ì‘ì€ ì•ˆë‚´(ì›í•˜ë©´ ì‚­ì œ ê°€ëŠ¥) */
.statsNote{
  margin-top:8px;
  font-size:12px;
  color:var(--muted);
  line-height:1.5;
}
#statsWrap:not(.isOpen) .statsNote{ display:none; }

/* ===== ì»¨íŠ¸ë¡¤ ===== */
.controls{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:12px;
}

button, select{
  font-size:16px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.15);
  background:rgba(255,255,255,.08);
  color:var(--text);
  padding:10px 14px;
  cursor:pointer;
}

button.primary{
  background:rgba(110,231,183,.18);
  border-color:rgba(110,231,183,.45);
}

/* âœ… ë‚œì´ë„ ì„ íƒ(ë³´í†µ/ì‰¬ì›€/ì–´ë ¤ì›€) ë” ì§„í•˜ê²Œ */
select#level{
  background: rgba(255,255,255,.18);                 /* ë” ì§„í•œ ë°°ê²½ */
  border: 1px solid rgba(110,231,183,.70);           /* ë” ì§„í•œ í…Œë‘ë¦¬ */
  color: #f3f6ff;                                    /* ê¸€ì ë” ì„ ëª… */
  font-weight: 800;
  box-shadow: 0 0 0 1px rgba(0,0,0,.15) inset;
  -webkit-appearance:none;
  appearance:none;
  padding-right: 40px;                               /* í™”ì‚´í‘œ ê³µê°„ */
  position:relative;
}
select#level:focus{
  outline:none;
  box-shadow:0 0 0 2px rgba(110,231,183,.30);
}

/* ì…€ë ‰íŠ¸ í™”ì‚´í‘œ(í¬ë¡¬/ëª¨ë°”ì¼ì—ì„œ ë” ì„ ëª…) */
.selectWrap{
  position:relative;
  display:inline-flex;
  align-items:center;
}
.selectWrap::after{
  content:"â–¾";
  position:absolute;
  right:14px;
  pointer-events:none;
  color:#e8ecff;
  opacity:.95;
  font-size:16px;
  transform:translateY(-1px);
}

/* ë©”ì‹œì§€ */
#msg{
  font-size:var(--fs-msg);
  font-weight:900;
}

#hint{
  font-size:var(--fs-hint);
  color:var(--muted);
  margin-top:4px;
}

/* ë³´ë“œ */
.board{
  display:grid;
  gap:var(--gap);
}

.tile{
  height:var(--tile-h);
  border-radius:18px;
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.12);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:var(--tile-fs);
  cursor:pointer;
  user-select:none;
  position:relative;
}

.tile[data-state="down"]::after{content:"?";font-weight:900;}
.tile[data-state="up"]::after{content:attr(data-emoji);}

.tile.matched{
  border-color:var(--accent);
  box-shadow:0 0 0 2px rgba(110,231,183,.35) inset;
}

/* ì™„ë£Œ íŒì—… */
.finishBack{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  z-index:90;
}

.finishCard{
  position:fixed;
  left:50%;
  top:26%;
  transform:translateX(-50%);
  width:min(440px, calc(100% - 36px));
  background:#1a2250;
  border:1px solid rgba(110,231,183,.55);
  border-radius:22px;
  box-shadow:0 18px 48px rgba(0,0,0,.55);
  padding:18px 20px;
  text-align:center;
  z-index:100;
}

.finishCard .big{
  font-size:22px;
  font-weight:900;
}

.finishCard .small{
  margin-top:10px;
  font-size:14px;
  color:var(--muted);
  line-height:1.7;
  white-space:pre-line; /* âœ… \n ì¤„ë°”ê¿ˆ ë°˜ì˜ */
}

.finishCard .actions{
  margin-top:14px;
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
}
.finishCard .actions button{
  font-size:16px;
  border-radius:999px;
  border:1px solid rgba(110,231,183,.45);
  background:rgba(110,231,183,.18);
  color:var(--text);
  padding:10px 14px;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="wrap">

  <div class="card">
    <div class="titleRow">
      <div class="title">ê°™ì€ ê·¸ë¦¼ ì°¾ê¸°</div>
    </div>
    <div class="sub">ê°™ì€ ê·¸ë¦¼ 2ê°œë¥¼ ì²œì²œíˆ ì°¾ì•„ë³´ì„¸ìš” ğŸ™‚</div>

    <!-- ì˜¤ëŠ˜ í˜„í™©(ê¸°ë¡ ëŠë‚Œ ìµœì†Œí™”: ë¼ë²¨ë§Œ ë³€ê²½) -->
    <div id="statsWrap">
      <div class="statsHeader">
        <button class="statsToggle" id="statsToggle" type="button" aria-expanded="false">
          ì˜¤ëŠ˜ í˜„í™© <span class="chev">âˆ¨</span>
        </button>
      </div>

      <div class="stats">
        <div class="pill">ì˜¤ëŠ˜ ë‚ ì§œ <b id="todayKey"></b></div>
        <div class="pill">ë§ì¶˜ ê°œìˆ˜ <b id="matched">0</b></div>
        <div class="pill">ì¹­ì°¬ì ìˆ˜ <b id="score">0</b></div>
        <div class="pill">ì˜¤ëŠ˜ í”Œë ˆì´ <b id="todayClear">0</b>íšŒ</div>
        <div class="pill">ì˜¤ëŠ˜ ìµœê³  ì ìˆ˜ <b id="todayBest">0</b>ì </div>
      </div>

      <!-- ì €ì¥/ê¸°ë¡ ë‹¨ì–´ ì—†ì´ ëŠë‚Œë§Œ ì •ë¦¬ -->
      <div class="statsNote">
        * ì´ í™”ë©´ì€ ë‚´ ê¸°ê¸°ì—ì„œë§Œ ì ê¹ í‘œì‹œë¼ìš”.
      </div>
    </div>

    <div class="controls">
      <span class="selectWrap">
        <select id="level" title="ë‚œì´ë„ ì„ íƒ">
          <option value="2x2">ì‰¬ì›€ (2x2)</option>
          <option value="3x2" selected>ë³´í†µ (3x2)</option>
          <option value="4x3">ì–´ë ¤ì›€ (4x3)</option>
        </select>
      </span>

      <button class="primary" id="newGame">ìƒˆë¡œ ì‹œì‘</button>
      <button id="peekBtn" type="button" title="ì¹´ë“œë¥¼ 2ì´ˆ ë™ì•ˆ ë³´ì—¬ì¤˜ìš”">ğŸ‘€ ì ê¹ë³´ê¸° (2ì´ˆ)</button>
      <button id="howBtn" type="button">ë°©ë²• ë³´ê¸°</button>
      <button id="sfxBtn" type="button">ğŸ”” íš¨ê³¼ìŒ</button>
      <button id="bigBtn" type="button">ğŸ” í° ê¸€ì”¨</button>
    </div>

    <!-- ê²Œì„ ë¡œì§ì´ ì“°ëŠ” selectëŠ” ìœ ì§€ -->
    <select id="peekSec" style="display:none">
      <option value="2">2</option>
    </select>
  </div>

  <div class="card">
    <div id="msg">ì¹´ë“œë¥¼ ëˆŒëŸ¬ì„œ ì‹œì‘í•´ìš” ğŸ™‚</div>
    <div id="hint">ì²˜ìŒì—” ì²œì²œíˆ ëˆŒëŸ¬ë³´ë©´ ë¼ìš”.</div>
  </div>

  <div class="card">
    <div class="board" id="board"></div>
  </div>

  <!-- í•˜ë‹¨ ë¬¸êµ¬ëŠ” 1íšŒë§Œ(ì¤‘ë³µ ë°©ì§€) -->
  <div class="card" style="font-size:12px;color:var(--muted); line-height:1.6;">
    ë³¸ ì„œë¹„ìŠ¤ëŠ” ì˜ë£Œ í–‰ìœ„ê°€ ì•„ë‹ˆë©°, ì¸ì§€ ìê·¹ì„ ìœ„í•œ ë†€ì´ì…ë‹ˆë‹¤.<br/>
    í•˜ë£¨ë§ˆìŒ Â· harumind.kr
  </div>

</div>

<!-- ìˆœì„œ ì¤‘ìš” -->
<script src="./config.js"></script>
<script src="./storage.js"></script>
<script src="./ui.js"></script>
<script src="./game.js"></script>

<!-- ì˜¤ëŠ˜ í˜„í™© í† ê¸€(ë‹«ê¸°/ì˜¤ëŠ˜ í˜„í™©) -->
<script>
(function(){
  const wrap = document.getElementById('statsWrap');
  const btn  = document.getElementById('statsToggle');
  if(!wrap || !btn) return;

  // ê¸°ë³¸ ë‹«í˜
  wrap.classList.remove('isOpen');
  btn.setAttribute('aria-expanded','false');
  btn.innerHTML = 'ì˜¤ëŠ˜ í˜„í™© <span class="chev">âˆ¨</span>';

  btn.addEventListener('click', () => {
    const open = wrap.classList.toggle('isOpen');
    btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    btn.innerHTML = (open ? 'ë‹«ê¸° ' : 'ì˜¤ëŠ˜ í˜„í™© ') + '<span class="chev">âˆ¨</span>';
  });
})();
</script>

<!-- ì ê¹ë³´ê¸° ë²„íŠ¼ â†’ ìˆ¨ê²¨ì§„ select(change) íŠ¸ë¦¬ê±° -->
<script>
(function(){
  const peekBtn = document.getElementById('peekBtn');
  const peekSel = document.getElementById('peekSec');
  if(!peekBtn || !peekSel) return;

  // game.jsê°€ peekSec.onchangeë¥¼ ì“°ëŠ” êµ¬ì¡°ë¼, change ì´ë²¤íŠ¸ë§Œ ë°œìƒì‹œí‚¤ë©´ ë¨
  peekBtn.addEventListener('click', () => {
    peekBtn.disabled = true;

    peekSel.value = "2";
    peekSel.dispatchEvent(new Event('change', { bubbles: true }));

    setTimeout(() => {
      peekSel.value = "";
      peekBtn.disabled = false;
    }, 2200);
  });
})();
</script>

</body>
</html>
